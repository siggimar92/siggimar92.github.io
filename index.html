<!DOCTYPE html>
<html lang="en">
<head>  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Torfh√∫s Retreat</title>
    
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato|Open+Sans|Oxygen|Quicksand|Raleway|Roboto|Tajawal" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="torfhus.css">
    <link rel="icon" 
      type="image/png" 
      href="favicon.png">

    <script
    src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous">
    </script>
    
    <script type='text/javascript'>
        (function(){function ShortCodeService(serviceUrl,orgId){let pendingPoll;function injectBootstrapScript(server,force){sessionStorage.setItem("cobrowseServer",server);let id="assist-cobrowse-bootstrap-script";let element=document.getElementById(id);if(element&&element!==null){if(!force){return}element.parentNode.removeChild(element)}let script=document.createElement("script");script.id=id;script.type="text/javascript";script.src=server+"/assist-bootstrap/assist-bootstrap.js";document.body.appendChild(script)}function startCobrowse(shortCodeData,successCallback){let laNodeUrl=shortCodeData.laNodeUrl;let laCorrelator=shortCodeData.laCorrelator;let laToken=shortCodeData.laToken;let laBootstrapVersion=shortCodeData.bootstrapVersion;window.cafexAssistBootstrap={};window.cafexAssistBootstrap.cobrowseBootstrapLoaded=function(){AssistSDK.startSupport({url:laNodeUrl,sessionToken:laToken,correlationId:laCorrelator,sdkPath:laNodeUrl+"/assistserver/sdk/web/consumer"});successCallback()};let bootstrapUrl=laNodeUrl+"/assist-bootstrap-"+laBootstrapVersion;injectBootstrapScript(bootstrapUrl,true)}function poll(shortCodeData,successCallback,failureCallback){pendingPoll=setTimeout(function(){let xhr=new XMLHttpRequest;let url=serviceUrl+"/assist-cloud-lb/visitorShortCode?orgId="+orgId+"&shortCode="+shortCodeData.shortCode+"&accessKey="+shortCodeData.shortCodeAccessKey;xhr.ontimeout=function(e){failureCallback("requestShortCode timeout",event.target.status,event.target)};xhr.addEventListener("load",function(event){if(event.target.response&&event.target.status==200){let shortCodeData=JSON.parse(event.target.response);startCobrowse(shortCodeData,successCallback)}else if(event.target.status==204){poll(shortCodeData,successCallback,failureCallback)}else{failureCallback("Short code timed out or was removed",event.target.status,event.target)}});xhr.addEventListener("error",function(event){failureCallback("Error polling for co-browse data",event.target.status,event.target)});xhr.open("GET",url);xhr.timeout=1e4;xhr.send()},2e3)}this.requestShortCode=function(shortCodeCallback,successCallback,failureCallback){if(typeof shortCodeCallback!="function"){throw"A function to handle the short code must be provided as the first argument."}if(shortCodeCallback.length<1){throw"The short code callback (first argument) must itself take an argument to receive the generated short code."}console.log("Requesting shortcode for org: "+orgId);let xhr=new XMLHttpRequest;let url=serviceUrl+"/assist-cloud-lb/visitorShortCode?orgId="+orgId;xhr.ontimeout=function(event){failureCallback("Timed out requesting short code",event.target.status,event.target)};xhr.addEventListener("load",function(event){if(event.target.response&&event.target.status==200){let shortCodeData=JSON.parse(event.target.response);shortCodeCallback(shortCodeData.shortCode);poll(shortCodeData,successCallback,failureCallback)}else{failureCallback("Failed requesting short code",event.target.status,event.target)}});xhr.addEventListener("error",function(event){failureCallback("Failed sending short code request",event.target.status,event.target)});xhr.open("POST",url);xhr.timeout=1e4;xhr.send()};this.cancel=function(){clearTimeout(pendingPoll)};window.addEventListener("load",function(){let serverUrl=sessionStorage.getItem("cobrowseServer");if(serverUrl){injectBootstrapScript(serverUrl,false)}})}window.LAShortCodeService = new ShortCodeService('https://service.eu1.liveassistfor365.com','12e26ba6-74ab-4d33-b020-6ff03ad00d8d');})();
    </script>


    <!-- <script type='text/javascript' src='torfhus.js'></script> -->
</head>
<body>
    <div class="bg"></div>
</body>
</html>
